---
title: "GSS challange Less Data"
author: "Connor Rice"
date: "09/28/2023"
output: html_document
---

```{r include=FALSE,echo=FALSE}
require(tidyverse)
require(tigerstats)
require(knitr)
require(foreign)
GSS <-read.dta(file="GSS2016.dta")
GSS <- droplevels(GSS)
mydata <- select(GSS,sex,race,cappun,degree,relig,gunlaw,tvhours,owngun,age,wordsum)
mydata <- na.omit(mydata)
```

# Introduction

<!--In this section you explain what you are trying to show.  Where did the data come from?  What is the research or other question you are trying to answer?.  If you skimp in this section expect to be marked down in your grade. Paint a picture of the project a couple of paragraphs is expected!-->

Is attitude toward capitol punishment (cappun) independent of race (race)?
If not, then whose view differs from whom??

$H_0$ The attitude towards capitol punishment is independent of race.

$H_a$ The attitude towards capitol punishment varies based on race.

# Methods

<!--Decide on your methods:  use "variable analysis" or other appropriate descriptors.  Make sure to choose at least one graphical method and at least one numerical method. Discuss what data manipulations may be needed for example subsetting or other binning procedures and what sort of graphical displays and inferential tools will be used!-->

Data for this analysis was filtered to exclude any persons who responded with "NA" to a number of other variables in the survey that we will not be examining.

Data analysis on the opinion of towards capitol punishment with respect ot the race of the opinion holder will be done by a two way variable analysis of whether or not they favor or oppose capitol punishment versus their race. The two categorical data types will be analyzed using code blocks from the cat_cat helper file modified through the assistance of chatGPT.

A modified fisher test will be done for the inferential results using the fisherXY r-function provided since there are more than two categories in race which makes a normal 2x2 comparison unuseful. 

# Results

<!--Divide this section into two sub-sections:  One for your descriptive  results and one for your inferential results.!-->

## Descriptive Results

### Graphical Descriptive Results

<!--Graphical results here.  Make sure to show your code.  Provide appropriate labels for axes, giving units if possible, and provide a good title for the graph, too.  Use the graphical results to describe the patterns if any that exist in the data as focused toward the research question. Bottom line is to explain the features of the graph that are relevant to conforming or departing to what is expected by your null hypothesis !-->

```{r}
barchartGC(~race + cappun,data=mydata, type="percent")
```

The data shows that for a comparison between the black and both the white and other race(s) it is likely safe to reject the null hypothesis however the null hypothesis as a whole cannot be rejected due to the very close rate of favoring and opposing capitol punishment in the white and other race(s).

## Now with LESS data (more variables give less data due to NA's) create the approate graphic displays to answer the question.

### Numerical Descriptive Results

<!--Numerical results go here. Use the numerical results to describe the patterns if any that exist in the data as focused toward the research question!-->

```{r}
table1 <- xtabs(~race + cappun, data=mydata)
rowPerc(table1)
colPerc(table1)
```

The numerical data with the filtered initial data is notably similar to the unfiltered data in the master branch with the exception that the rate of favoring capitol punishment in the black race is quite a bit higher.

## Inferential Results

<!--State hypothesis clearly.  Make sure your discussion of the inferential test covers all the aspects that the test output produces, such as test statistic, p-value etc.  Make a decision about the null hypothesis, explain the assumptions on which the selected test/procedure was based, and why the chosen procedure satisfys the assumptions and is appropriate to answer the research question!-->

```{r}
fisherXY(mydata$race,mydata$cappun, printAll = TRUE)
```

In the filtered data the null hypothesis cannot be completely rejected based on the inferential data due to the statistically insignificant difference between the white and other race(s) with regards to their rates of favoring or opposing capitol punishment.

# Discussion and Conclusion

<!--Discussion and conclusion here.  If you found a relationship be sure to consider whether the relationship occurs because one of the variables causes the other, or whether they perhaps are related for some other reason.  Watch the chapter 6 videos from the GeorgeTown videos collection.!-->

There is no statistically significant difference between the opinion towards capitol punish between the white and other race(s) in the filtered data. The data only describes a significant difference between black and the other race/races in the filtered data so the null hypothesis cannot be completely rejected. Every form of data analysis performed supports these conclusions. The difference between the filtered and unfiltered data sets is likely, at least in part, due to the much smaller sample size present in the filtered data.
